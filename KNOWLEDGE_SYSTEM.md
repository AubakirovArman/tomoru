# Система управления базами знаний

## Обзор

Система управления базами знаний интегрирована с векторным хранилищем OpenAI и позволяет:

- Создавать и управлять базами знаний
- Загружать документы в поддерживаемых форматах
- Организовывать знания по категориям
- Подключать базы знаний к AI ботам

## Поддерживаемые форматы файлов

- **TXT** - текстовые файлы
- **MD** - Markdown документы
- **PDF** - PDF документы
- **DOCX** - Microsoft Word документы

## API Endpoints

### Базы знаний

#### GET /api/knowledge
Получить список всех баз знаний

**Ответ:**
```json
{
  "knowledgeBases": [
    {
      "id": "vs_xxx",
      "name": "Название базы",
      "description": "Описание",
      "category": "technical|business|general|ai",
      "status": "ready|training|active",
      "documents": 10,
      "accuracy": 94,
      "usage": 1250,
      "size": "2.3 MB",
      "lastUpdated": "15.01.2024",
      "vectorStoreId": "vs_xxx"
    }
  ]
}
```

#### POST /api/knowledge
Создать новую базу знаний

**Тело запроса:**
```json
{
  "name": "Название базы знаний",
  "description": "Описание базы знаний",
  "category": "technical"
}
```

#### DELETE /api/knowledge?id=vs_xxx
Удалить базу знаний

### Документы

#### GET /api/knowledge/documents?vectorStoreId=vs_xxx
Получить документы для конкретной базы знаний

**Ответ:**
```json
{
  "documents": [
    {
      "id": "file_xxx",
      "title": "document.pdf",
      "type": "pdf",
      "size": "2.3 MB",
      "uploadDate": "15.01.2024",
      "processed": true,
      "vectorStoreId": "vs_xxx"
    }
  ]
}
```

#### POST /api/knowledge/documents
Загрузить документ в базу знаний

**Тело запроса (FormData):**
- `file`: файл для загрузки
- `vectorStoreId`: ID базы знаний

#### DELETE /api/knowledge/documents?fileId=file_xxx&vectorStoreId=vs_xxx
Удалить документ из базы знаний

## Использование в интерфейсе

### Создание базы знаний

1. Перейдите на страницу `/knowledge`
2. Нажмите кнопку "Создать базу знаний"
3. Заполните название, описание и выберите категорию
4. Нажмите "Создать"

### Загрузка документов

1. Откройте нужную базу знаний
2. В разделе "Документы" нажмите "Загрузить документ"
3. Выберите файл в поддерживаемом формате
4. Дождитесь завершения обработки

### Управление документами

- **Просмотр**: нажмите на иконку глаза
- **Скачивание**: нажмите на иконку загрузки
- **Удаление**: нажмите на иконку корзины

## Интеграция с OpenAI

Система использует:

- **Vector Stores** для хранения и индексации документов
- **Files API** для загрузки и управления файлами
- **Embeddings** для семантического поиска

## Переменные окружения

Убедитесь, что в файле `.env` настроена переменная:

```
OPENAI_API_KEY=your_openai_api_key_here
```

## Безопасность

- Все файлы проверяются на поддерживаемые форматы
- Размер файлов ограничен настройками OpenAI
- API ключи не передаются на клиентскую сторону

## Мониторинг

- Статистика использования отображается в интерфейсе
- Логи операций записываются в консоль сервера
- Ошибки обрабатываются и отображаются пользователю

## Будущие улучшения

- Подключение баз знаний к конкретным ботам
- Расширенная аналитика использования
- Поддержка дополнительных форматов файлов
- Групповые операции с документами
- Поиск по содержимому документов